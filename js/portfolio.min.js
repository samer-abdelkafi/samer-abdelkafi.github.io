function initTimeline(e){e.each(function(){var e=$(this),t={};t.timelineWrapper=e.find(".events-wrapper"),t.eventsWrapper=t.timelineWrapper.children(".events"),t.fillingLine=t.eventsWrapper.children(".filling-line"),t.timelineEvents=t.eventsWrapper.find("a"),t.timelineDates=parseDate(t.timelineEvents),t.eventsMinLapse=minLapse(t.timelineDates),t.timelineNavigation=e.find(".cd-timeline-navigation"),t.eventsContent=e.children(".events-content"),t.maxHeight=getMaxHeight(),setDatePosition(t,eventsMinDistance);var n=setTimelineWidth(t,eventsMinDistance);e.addClass("loaded"),t.timelineNavigation.on("click",".next",function(e){e.preventDefault(),updateSlide(t,n,"next")}),t.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),updateSlide(t,n,"prev")}),t.eventsWrapper.on("click","a",function(e){e.preventDefault(),t.timelineEvents.removeClass("selected"),$(this).addClass("selected"),updateOlderEvents($(this)),updateFilling($(this),t.fillingLine,n),updateVisibleContent($(this),t.eventsContent,t.maxHeight)}),t.eventsContent.on("swipeleft",function(){var e=checkMQ();"mobile"==e&&showNewContent(t,n,"next")}),t.eventsContent.on("swiperight",function(){var e=checkMQ();"mobile"==e&&showNewContent(t,n,"prev")}),$(document).keyup(function(i){"37"==i.which&&elementInViewport(e.get(0))?showNewContent(t,n,"prev"):"39"==i.which&&elementInViewport(e.get(0))&&showNewContent(t,n,"next")})})}function updateSlide(e,t,n){var i=getTranslateValue(e.eventsWrapper),a=Number(e.timelineWrapper.css("width").replace("px",""));"next"==n?translateTimeline(e,i-a+eventsMinDistance,a-t):translateTimeline(e,i+a-eventsMinDistance)}function showNewContent(e,t,n){var i=e.eventsContent.find(".selected"),a="next"==n?i.next():i.prev();if(a.length>0){var r=e.eventsWrapper.find(".selected"),s="next"==n?r.parent("li").next("li").children("a"):r.parent("li").prev("li").children("a");updateFilling(s,e.fillingLine,t),updateVisibleContent(s,e.eventsContent,e.maxHeight),s.addClass("selected"),r.removeClass("selected"),updateOlderEvents(s),updateTimelinePosition(n,s,e)}}function updateTimelinePosition(e,t,n){var i=window.getComputedStyle(t.get(0),null),a=Number(i.getPropertyValue("left").replace("px","")),r=Number(n.timelineWrapper.css("width").replace("px","")),s=Number(n.eventsWrapper.css("width").replace("px","")),o=getTranslateValue(n.eventsWrapper);("next"==e&&a>r-o||"prev"==e&&-o>a)&&translateTimeline(n,-a+r/2,r-s)}function translateTimeline(e,t,n){var i=e.eventsWrapper.get(0);t=t>0?0:t,t="undefined"!=typeof n&&n>t?n:t,setTransformValue(i,"translateX",t+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==n?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function updateFilling(e,t,n){var i=window.getComputedStyle(e.get(0),null),a=i.getPropertyValue("left"),r=i.getPropertyValue("width");a=Number(a.replace("px",""))+Number(r.replace("px",""))/2;var s=a/n;setTransformValue(t.get(0),"scaleX",s)}function setDatePosition(e,t){for(i=0;i<e.timelineDates.length;i++){var n=daydiff(e.timelineDates[0],e.timelineDates[i]),a=Math.round(n/e.eventsMinLapse)+2;e.timelineEvents.eq(i).css("left",a*t+"px")}}function setTimelineWidth(e,t){var n=daydiff(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1]),i=n/e.eventsMinLapse,i=Math.round(i)+4,a=i*t;return e.eventsWrapper.css("width",a+"px"),updateFilling(e.eventsWrapper.find("a.selected"),e.fillingLine,a),updateTimelinePosition("next",e.eventsWrapper.find("a.selected"),e),a}function getMaxHeight(){var e=-1;return $(".events-content>ol>li").each(function(){var t=$(this).height();e=t>e?t:e}),e}function updateVisibleContent(e,t,n){var i=e.data("date"),a=t.find(".selected"),r=t.find('[data-date="'+i+'"]');r.height();if(r.index()>a.index())var s="selected enter-right",o="leave-left";else var s="selected enter-left",o="leave-right";r.attr("class",s),a.attr("class",o).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){a.removeClass("leave-right leave-left"),r.removeClass("enter-left enter-right")}),t.css("height",n+"px")}function updateOlderEvents(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function getTranslateValue(e){var t=window.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var i=n[4]}else var i=0;return Number(i)}function setTransformValue(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}function parseDate(e){var t=[];return e.each(function(){var e=$(this),n=e.data("date").split("T");if(n.length>1)var i=n[0].split("/"),a=n[1].split(":");else if(n[0].indexOf(":")>=0)var i=["2000","0","0"],a=n[0].split(":");else var i=n[0].split("/"),a=["0","0"];var r=new Date(i[2],i[1]-1,i[0],a[0],a[1]);t.push(r)}),t}function daydiff(e,t){return Math.round(e-t)}function minLapse(e){var t=[];for(i=1;i<e.length;i++){var n=daydiff(e[i-1],e[i]);t.push(n)}return Math.min.apply(null,t)}function elementInViewport(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&n+i>window.pageXOffset}function checkMQ(){return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function animateTime(){var e=Snap("#workspace"),t=e.select("#second"),n=e.select("#minute"),i=e.select("#hour"),a=e.select("#circle193"),r=","+a.getBBox().cx+","+a.getBBox().cy,s=new Date,o=s.getHours(),l=s.getMinutes(),c=s.getSeconds();t.transform("r"+(6*c-3)+r),t.animate({transform:"r"+6*c+r},500,mina.elastic),n.transform("r"+6*l+r),0==c&&(n.transform("r"+(6*l-3)+r),n.animate({transform:"r"+6*l+r},500,mina.elastic)),i.transform("r"+(30*o+l/2)+r),setTimeout("animateTime()",1e3)}!function(e){e(document).ready(function(){e.fn.reverse=[].reverse,e(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle)",function(n){var i=e(this);t(i)}),e(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle)",function(t){var i=e(this);n(i)}),e(document).on("click.fixedActionBtn",".fixed-action-btn.click-to-toggle > a",function(i){var a=e(this),r=a.parent();r.hasClass("active")?n(r):t(r)})}),e.fn.extend({openFAB:function(){t(e(this))},closeFAB:function(){n(e(this))}});var t=function(t){if($this=t,$this.hasClass("active")===!1){var n,i;n=40,$this.addClass("active"),$this.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:n+"px",translateX:i+"px"},{duration:0});var a=0;$this.find("ul .btn-floating").reverse().each(function(){e(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:a}),a+=40})}},n=function(e){$this=e;var t,n;t=40,$this.removeClass("active");$this.find("ul .btn-floating").velocity("stop",!0),$this.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:t+"px",translateX:n+"px"},{duration:80})}}(jQuery);var eventsMinDistance=60;window.onload=function(){setInterval(function(){var e=$(".slideshow ul"),t=e.height();e.animate({marginTop:-t},500,function(){$(this).css({marginTop:0}).find("li:last").after($(this).find("li:first"))})},4e3),$(".js-scrollTo").on("click",function(){var e=$(this).attr("href"),t=750;return $(".mdl-layout__content").animate({scrollTop:$(e).get(0).offsetTop},t),!1});var e=$(".section"),t=$(".mdl-navigation"),n=t.outerHeight();$(".mdl-layout__content").on("scroll",function(){var i=$(this).scrollTop();e.each(function(){var a=$(this).get(0).offsetTop-n,r=a+$(this).outerHeight();i>=a&&r>=i&&(t.find("a").removeClass("active"),e.removeClass("active"),$(this).addClass("active"),t.find('a[href="#'+$(this).attr("id")+'"]').addClass("active"))})})},animateTime(),angular.module("myPortfolio",["ngResource","ngSanitize","ngAnimate"]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","*://www.youtube.com/**"])}]).directive("onFinishRender",["$timeout",function(e){return function(t,n,i){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}]).service("PostService",["$log","$resource",function(e,t){return{loadPosts:function(e,n){var i=t("https://public-api.wordpress.com/rest/v1.1/sites/samerabdelkafi.wordpress.com/posts?pretty=true&fields=ID,title,excerpt,short_URL,featured_image,date",{number:"@number",offset:"@offest"});return i.get({number:e,offset:n})}}}]).service("ExperienceService",["$log","$resource",function(e,t){return{loadExperiences:function(){var e=t("json/experience.json",{},{query:{method:"GET",params:{},isArray:!0}});return e.query()}}}]).service("ProjectsService",["$log","$resource",function(e,t){return{loadProjects:function(){var e=t("json/projects.json",{},{query:{method:"GET",params:{},isArray:!0}});return e.query()}}}]).controller("PostsController",["$scope","$log","PostService","$sce","$timeout",function(e,t,n,i,a){e.loadPosts=function(){var t=0;e.posts&&(t=e.posts.length),e.loading=!0,n.loadPosts(3,t).$promise.then(function(t){if(e.posts)a(function(){e.posts=e.posts.concat(t.posts),e.index=e.posts.length,e.found=t.found,e.loading=!1},1e3);else{var n=[];angular.forEach(t.posts,function(e){e.featured_image=e.featured_image+"?w=330",n.push(e)},n),e.posts=n,e.index=e.posts.length,e.found=t.found,e.loading=!1}})},e.loadPosts()}]).controller("ExperienceController",["$scope","$log","ExperienceService","$sce",function(e,t,n,i){e.experiences=n.loadExperiences(),e.$on("ngRepeatFinished",function(e){var t=$(".cd-horizontal-timeline");t.length>0&&initTimeline(t)})}]).controller("ProjectsController",["$scope","$log","ProjectsService","$sce",function(e,t,n,i){e.projects=n.loadProjects()}]);